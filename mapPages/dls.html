
<html>
<head>
<!-- <meta name="viewport" content="width=device-width, user-scalable=no"> -->

<meta name="viewport" content="width=1920">
    
    <script src="../libs/colorLibNick.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Roboto:500' rel='stylesheet' type='text/css'>
    <script src="../libs/jquery-min.js"></script>
     <script src="../libs/color-thief.min.js"></script>
  <!-- <script type="text/javascript" src="HTML5_Base64_Video_AutoPlay_Progressive_Download.js"></script>-->
  <!-- <link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'> -->
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" type="text/css" href="../css/buttons.css" />
  <title>DoubleClick Leadership Summit - 2015</title>
	
  <script>
var expanded;
var lb_exp;
var close_btn;
// MPU
var lb_anim;
var invitation;
var animInterval;
var mpu_space;
var invitationX;
var invitationY;

// SKY
var lb_anim2;
var invitation2;
var animInterval2;
var sky_space;
var invitationX2;
var invitationY2;

// iframe
var ic;
var scw,sch;

//*** Mobile Detect ***
var isMobile = {
  Android: function() {
      return navigator.userAgent.match(/Android/i);
  },
  BlackBerry: function() {
      return navigator.userAgent.match(/BlackBerry/i);
  },
  iOS: function() {
      return navigator.userAgent.match(/iPhone|iPad|iPod/i);
  },
  Opera: function() {
      return navigator.userAgent.match(/Opera Mini/i);
  },
  Windows: function() {
      return navigator.userAgent.match(/IEMobile/i);
  },
  any: function() {
      return true; //(isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows()) && hasTouchScreen();
  }
};

var hasTouchScreen = function(){var n=!1,o=function(n){return-1!==window.navigator.userAgent.toLowerCase().indexOf(n)};return("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(o("NT 5")||o("NT 6.1")||o("NT 6.0")||(n=!0)),n};

var launchIntoFullscreen = function( element) {
  /*
    if(element.requestFullscreen) {
      element.requestFullscreen();
    } else if(element.mozRequestFullScreen) {
      element.mozRequestFullScreen();
    } else if(element.webkitRequestFullscreen) {
      element.webkitRequestFullscreen();
    } else if(element.msRequestFullscreen) {
      element.msRequestFullscreen();
    }
  */
    $('#opening').hide();
    $('#experience').show();
}
window.load = function() {
  
};

var goFull = function(){
  document.getElementById("opening").removeEventListener('click',goFull, false);
  launchIntoFullscreen(document.documentElement);
}

var setupExpDim = function(){
  // Resize screen to fit Full HD
}

window.onresize = function(){setupExpDim()};

var startLbAnim = function(){
  clearInterval(animInterval);
  ic.src = 'http://146.148.2.249/?rand='+Math.random()+'&city=1';
  animInterval = setInterval(expandLb,1800);

}

var startLbAnim2 = function(){
  invitation2.style.transition = "all 0.25s ease-in-out";

  invitation2.removeEventListener('mouseover',startLbAnim2,false);
  if (isMobile.any()){
    invitation2.removeEventListener('touchstart',startLbAnim2,false);
  }else{
    invitation2.removeEventListener('click',startLbAnim,false);
  }

  if (isMobile.any()){
    invitation2.addEventListener('touchstart',closeLb,false);
  }else{
    // invitation2.addEventListener('click',expandLb2,false);
  }
  lb_anim2.style.display = 'block';
  lb_anim2.style.opacity = '1';
  document.getElementById("progress2").className = "run-animation";
  clearInterval(animInterval);
  ic.src = 'http://146.148.2.249/?rand='+Math.random()+'&city=2';
  animInterval = setInterval(expandLb2,1800);

}

var closeLb = function(){
   
  expanded.style.display = "none";
   

  clearInterval(animInterval);
 
  // Refresh iframe
  refreshIframe();
}

var expandLb = function(cityId){
  console.log('calling expand lib');
  ic.src = 'http://146.148.2.249/?rand='+Math.random()+'&city='+cityId;
  console.log('epxanding function ');
  setTimeout(function(){

    expanded.style.display = "block";
    setupExpDim();
  }, 250);
}

var expandLb2 = function(){
  if (isMobile.any()){
    invitation2.removeEventListener('touchstart',closeLb,false);
  }else{
    // invitation2.removeEventListener('click',expandLb2,false);
  }
  invitation2.removeEventListener('mouseout',closeLb,false);
  
  clearInterval(animInterval);
  invitation2.style.left = (960/2 - (invitation2.offsetWidth/2))+"px";
  invitation2.style.top = (600/2 - (invitation2.offsetHeight/2))+"px";
  
  setTimeout(function(){

    expanded.style.display = "block";
    setupExpDim();
  }, 250);
}

function refreshIframe(){
  
  ic.src = "about:blank";
  // ic.src = 'http://146.148.2.249/?rand='+Math.random();
}

window.onclick = function(e){
 
}
function getPosition(e) {
    var isNotFirefox = (navigator.userAgent.toLowerCase().indexOf('firefox') == -1);
    var x = 0, y = 0;
    while (e) {
        x += e.offsetLeft - e.scrollLeft + (isNotFirefox ? e.clientLeft : 0);
        y += e.offsetTop - e.scrollTop + (isNotFirefox ? e.clientTop : 0);
        e = e.offsetParent;
    }
    return { x: x + window.scrollX, y: y + window.scrollY };
}


  </script>


  <script>

      $( document ).ready(function() {
        //CALL THE MOST SEE IMAGE AND EXTRACT THE PATTERN
        //
        //
        /*
        function fetchColorSchema(){
          console.log('FETCH COLOR SCHEMA')
          try {

          $.get("http://146.148.2.249:3000/artworks/topPerCity/1/1", function( data ) {
         

              //src : "http://146.148.2.249/"+data[0].imageURL, 
              $('#container').append($('<img>', { 
                src : "http://146.148.2.249/"+data[0].imageURL, 
               
                id: "colorImage",
                alt : "Test Image", 
                title : "Test Image"
              }));

              $('#colorImage').load(function() {
                console.log('color image')
                 var colorThief = new ColorThief();
                 var colorRGBArray = colorThief.getColor(document.getElementById("colorImage"));
                 
                 var imageHue = rgbToHsl(colorRGBArray[0],colorRGBArray[1],colorRGBArray[2])[0] * 360;

                 var adjustValueForDCLK = (imageHue)// + 450)%360  // dclk color is hue = 90, using 360+90 for staying positive lol
                 
                 document.getElementById("invitation").style.webkitFilter = "hue-rotate("+adjustValueForDCLK+"deg)";
                 document.getElementById("lb_anim").style.webkitFilter = "hue-rotate(-"+adjustValueForDCLK+"deg)";
                $("#colorImage").remove()
              });
          });
          }catch(err) {
              document.getElementById("demo").innerHTML = err.message;
          }
        }

         function fetchColorSchema2(){
         try {
          $.get("http://146.148.2.249:3000/artworks/topPerCity/1/2", function( data ) {
             
 
              //src : "http://146.148.2.249/"+data[0].imageURL, 
              $('#container').append($('<img>', { 
                src : "http://146.148.2.249/"+data[0].imageURL, 
               
                id: "colorImage2",
                alt : "Test Image", 
                title : "Test Image"
              }));

              $('#colorImage2').load(function() {
          
                 var colorThief = new ColorThief();
                 var colorRGBArray = colorThief.getColor(document.getElementById("colorImage2"));
             
                 var imageHue = rgbToHsl(colorRGBArray[0],colorRGBArray[1],colorRGBArray[2])[0] * 360;
                

                 var adjustValueForDCLK = (imageHue)// + 450)%360  // dclk color is hue = 90, using 360+90 for staying positive lol
                
                 document.getElementById("invitation2").style.webkitFilter = "hue-rotate("+adjustValueForDCLK+"deg)";
                 document.getElementById("lb_anim2").style.webkitFilter = "hue-rotate(-"+adjustValueForDCLK+"deg)";
                $("#colorImage2").remove()
              });
          });
        }catch(err) {
            document.getElementById("demo").innerHTML = err.message;
        }

        }

        fetchColorSchema2();
        setInterval( fetchColorSchema2, 50000 );
        fetchColorSchema();
        setInterval( fetchColorSchema, 60000 );  
        */       
       





       console.log('loaded');
  ic = document.getElementById('iframe_content');
  lb_anim = document.getElementById("lb_anim");
  invitation = document.getElementById("invitation");
  expanded = document.getElementById("expanded");
  lb_exp = document.getElementById("lb_exp");
  close_btn = document.getElementById("close_circle");
  mpu_space = document.getElementById("mpu_space");
  invitationX = "1490";
  invitationY = "13";
  
  $('#opening').show();
  $('#experience').hide();
  document.getElementById("opening").addEventListener('click',goFull, false);

  // Attach event listener to different locations. Passing the location as parameter
  document.getElementById("westCostButton").addEventListener('touchstart',function(){
    expandLb(1);
  },false);
  document.getElementById("westCostButton").addEventListener('click',function(){
    expandLb(1);
  },false);

  document.getElementById("eastCostButton").addEventListener('touchstart',function(){
    expandLb(2);
  },false);
  document.getElementById("eastCostButton").addEventListener('click',function(){
    expandLb(2);
  },false);

  document.getElementById("europeButton").addEventListener('touchstart',function(){
    expandLb(3);
  },false);
  document.getElementById("europeButton").addEventListener('click',function(){
    expandLb(3);
  },false);

  document.getElementById("africaButton").addEventListener('touchstart',function(){
    expandLb(4);
  },false);
  document.getElementById("africaButton").addEventListener('click',function(){
    expandLb(4);
  },false);

  document.getElementById("indiaButton").addEventListener('touchstart',function(){
    expandLb(5);
  },false);
  document.getElementById("indiaButton").addEventListener('click',function(){
    expandLb(5);
  },false);

  document.getElementById("eastAsiaButton").addEventListener('touchstart',function(){
    expandLb(6);
  },false);
  document.getElementById("eastAsiaButton").addEventListener('click',function(){
    expandLb(6);
  },false);

  document.getElementById("close_circle").addEventListener('touchstart',closeLb,false);
  document.getElementById("close_circle").addEventListener('click',closeLb,false);
    });

  </script>
</head>
<body>
 
<div id="container" class='main'>
  <div id="experience">
      <div class="gradientBrand"> </div>
      <button id="westCostButton" class="button button--aylen button--round-s button--text-thick">US - West Cost</button>
      <button id="eastCostButton" class="button button--aylen button--round-s button--text-thick">US - East Cost</button>
      <button id="europeButton" class="button button--aylen button--round-s button--text-thick">Europe</button>
      <button id="africaButton" class="button button--aylen button--round-s button--text-thick">Africa</button>
      <button id="indiaButton" class="button button--aylen button--round-s button--text-thick">India</button>
      <button id="eastAsiaButton" class="button button--aylen button--round-s button--text-thick">East Asia</button>
    </ul>
          <div id='expanded' class='expanded'>
            <div id='lb_exp' class='border lb_exp'>
              <iframe id='iframe_content' frameBorder="0" src="http://146.148.2.249/"></iframe>
            </div>
            <div id='close_circle' class='close_circle'></div>
          </div>
  </div>
  <div id="opening"> 

      <img src='../img/dls.png' id='logoBig' />
  </div>
</div>
</body>
</html>

<style>

  .gradientBrand{
    display: block;
    width: 100%;
    height: 5px;
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#54c1d6+0,1dac4b+100 */
    background: #54c1d6; /* Old browsers */
    background: -moz-linear-gradient(left,  #54c1d6 0%, #1dac4b 100%); /* FF3.6-15 */
    background: -webkit-linear-gradient(left,  #54c1d6 0%,#1dac4b 100%); /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to right,  #54c1d6 0%,#1dac4b 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#54c1d6', endColorstr='#1dac4b',GradientType=0 ); /* IE6-9 */

  }

  {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  }

  :focus {
    outline: 0;
    border:none;
    color: rgba(0, 0, 0, 0);
  }

  body,html{
    width:f%;
    height:100%;
    margin: 0;
    padding: 0;
    background-color: #f0f0f0;
    overflow:hidden;
  }

  .border {
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;         /* Opera/IE 8+ */
  width:100%;
  height:100%;
  border:0px solid #333;
  position:absolute;
  background:transparent;
}

.mpu_300_250{
  position:absolute;
  width:384px;
  height:270px;
  background-color: #0288d1;
  cursor:pointer;
  top:0px;
  left:0px;
  background:url('US_MPU_BG.jpg') no-repeat;

}

.sky_160_600{
  position:absolute;
  width:288px;
  height:862px;
  background-color: #ffea00;
  cursor:pointer;
  top:0px;
  left:0px;
  background: url('US_SKY_BG.jpg') no-repeat;

}

.lightbox_anim{
  width:100%;
  height:100%;
  background-color: rgba(0,0,0,0.6);
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  pointer-events:none;
  -webkit-transition: opacity 0.25s; 
  -moz-transition: opacity 0.25s;
  -ms-transition: opacity 0.25s;
  transition: opacity 0.25s;
  opacity:0;
  display:none;
}

#progress_section{
  width: 200px;
  height:50px;
  position:absolute;
  margin-left:-100px;
  margin-top:-25px;
  top: 50%;
  left:50%;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;         /* Opera/IE 8+ */
  border:0px solid red;
}

#progress_section2{
  width: 110px;
  height:50px;
  position:absolute;
  margin-left:-55px;
  margin-top:-25px;
  top: 50%;
  left:50%;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;         /* Opera/IE 8+ */
  border:0px solid red;
}

.lb_copy{
  font-family: 'Roboto', sans-serif;
  color: #f0f0f0;
  font-weight: 300;
  font-size: 14px;
}

#progressbar {
  width: 194px;
  height: 12px;
  background-color: #eee;
  padding: 2px;
  border-radius: 3px;
  clear: both;
  margin-top: 2px;
}

#progressbar2 {
  width: 104px;
  height: 12px;
  background-color: #eee;
  padding: 2px;
  border-radius: 3px;
  clear: both;
  margin-top: 2px;
}

#progress,#progress2 {
    background: #0288d1; /*-- Color of the bar --*/
    height: 12px;
    width: 0%;
    max-width: 100%;
    float: left;
    -webkit-box-shadow: 0px 20px 25px -10px #bbb;
    -moz-box-shadow: 0px 20px 25px -10px #bbb;
    -ms-box-shadow: 0px 20px 25px -10px #bbb;
    box-shadow: 0px 20px 25px -10px #bbb;
}

.run-animation {
  -webkit-animation: progress 2s forwards;
  -moz-animation:    progress 2s forwards;
  animation:         progress 2s forwards; 
}


#pbaranim,#pbaranim2 {
    height: 12px;
    width: 100%;
    overflow: hidden;
    background: url('anim.gif') repeat-x;
    -moz-opacity: 0.25;
    -khtml-opacity: 0.25;
    opacity: 0.25;
    -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=25);
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=25);
    filter: alpha(opacity=25);
}

@-webkit-keyframes progress { 
    from { width: 0%}

    to { width: 100% }
}

@-moz-keyframes progress { 
    from {width: 0% }

    to { width: 100% }
}

@-ms-keyframes progress { 
    from { width: 0% }

    to { width: 100% }
}

@keyframes progress { 
    from {width: 0% }

    to { width: 100% }
}

.expanded{
  position:absolute;
  width:100%;
  height:100%;
  background-color: #FFF;
  top: 0px;
  left: 0px;
  margin-right: 30px;
  margin:0;
  z-index: 10;
  padding:0;
  overflow:hidden;

}
#expanded{
  display:none;
}

#invitation,#invitation2{
  display:none;
}

.lb_exp{
  position:absolute;
  background-color:white;
  -webkit-box-shadow: 0px 20px 25px -10px #333;
  -moz-box-shadow: 0px 20px 25px -10px #333;
  -ms-box-shadow: 0px 20px 25px -10px #333;
  box-shadow: 0px 20px 25px -10px #333;
  margin-top: 1%;
  margin-left: 1%;
  overflow:hidden;

}

.close_circle{
  background: url('close_circle.png');
  background-size: 100px 100px;
  width:100px;
  height:100px;
  position: absolute;
  right: -25px;
  top: -25px;
  cursor:pointer;
  position:absolute;
}
#iframe_content{
  margin:0;
  padding:0;
  top:0px;
  left:0px;
  width:98%;
  height:92%;
}

#Table_01{
  position:absolute;
  left:0;
  margin-left:0;
}
.saturate {-webkit-filter: saturate(3);}
#opening{
  position: absolute;
  background-color: #252734;
  width: 100%;
  height: 100%;
}
#experience {
  width: 100%;
  height: 100%;
  position: absolute;
  background-color: #fdfdfd;
}
#logoBig{
  position: absolute;
  top: 30%;
  width: 60%;
  left: 20%;
}
.button:first-child{
  margin-top: 5% !important;
}
  </style>
